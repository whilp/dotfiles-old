# Other files.
source "~/.mutt/aliases"
source "~/.mutt/color"
source "~/.mutt/pgp"

# Settings.
set alias_file="~/.mutt/aliases"
set ascii_chars=yes
set beep_new=no
set certificate_file=~/.mutt.certificates
set charset="us-ascii//TRANSLIT"
set copy=yes
set delete=yes
set edit_headers=yes
set editor='vi "+/^$"'
set folder=~/.maildir
set forward_format="Fwd: %s"
set from="Will Maier <willmaier@ml1.net>"
set header_cache=~/.maildir/.cache
set implicit_autoview=yes
set include=yes
set ispell="aspell -e -c"
set mail_check=0
set markers=no
set mark_old=no
set mask='!^(\.[^.]|attic|.*log)'
set mbox_type=Maildir
set move=no
set pager_index_lines=4
set pager_stop=yes
set postpone=no
set postponed="+drafts"
set print_cmd="a2ps -r -q --columns=2 -j -C -2 -Email -o - | ssh wcmaier@luma.hep.wisc.edu 'lpr -Plp3b'"
set print_split=yes
set quit=ask-no
set recall=no
set record="+sent"
set resolve=no
set reverse_name=yes
set sig_dashes=yes
set signature='~/.signatures/default'
set smart_wrap=yes
set sort=threads
set sort_aux=reverse-last-date
set spoolfile='/var/mail/will'
set ssl_starttls
set status_format="mutt: %f [Msgs:%?M?%M/?%m%?n? New:%n?%?o? Old:%o?%?d? Del:%d?%?F? Flag:%F?%?t? Tag:%t?%?p? Post:%p?%?b? Inc:%b?%?l? %l?]---(%s/%S)-%>-(%P)---"
set timeout=60
set time_inc=100
set wait_key=no

alternates "(wcmaier@wisc\.edu|wcmaier@hep\.wisc\.edu|wcmaier@gmail\.com|willmaier@ml1\.net|wcmaier@openbsd.org)"

# Macros.
# Function list: http://www.mutt.org/doc/manual/manual-6.html#functions
macro index S "|spambayes -s >/dev/null<enter><save-message>=attic/spam<enter><enter>" "Mark as spam"
macro pager S "|spambayes -s >/dev/null<enter><save-message>=attic/spam<enter><enter>" "Mark as spam"
macro index H "|spambayes -g | fdm -mqa stdin fetch<enter><delete-message>" "Mark as ham"
macro pager H "|spambayes -g | fdm -mqa stdin fetch<enter><delete-message>" "Mark as ham"
macro index C "<change-folder>?" "open a different folder"
macro pager C "<change-folder>?" "open a different folder"
macro pager <esc>s "<enter-command>source ~/.muttrc<enter>" "Reload configuration"
macro index <esc>s "<enter-command>source ~/.muttrc<enter>" "Reload configuration"
macro index x "<sync-mailbox><next-unread-mailbox>"
macro pager x "<sync-mailbox><next-unread-mailbox>"
macro index d "<delete-message><next-new>"
macro pager d "<delete-message><next-new>"
macro index = "<delete-pattern>~=<enter>"
macro pager = "<delete-pattern>~=<enter>"
macro index r "<read-thread><next-new>"
macro pager r "<read-thread><next-new>"
macro index \CR "<read-thread><next-new>"
macro pager \CR "<read-thread><next-new>"

# Bindings.
bind index '.' buffy-list
bind generic 'G' noop
bind generic '\CG' noop
bind generic zg first-entry
bind generic zz current-middle
bind generic zG last-entry
bind index \CU previous-page
bind pager \CU previous-page
bind generic \CU previous-page
bind index \CF next-page
bind pager \CF next-page
bind index \CY noop
bind pager \CY noop
bind pager j next-line
bind pager k previous-line
bind pager J next-undeleted
bind pager K previous-undeleted
bind pager \CW buffy-list
bind index \CW buffy-list

bind pager <Right> next-new-then-unread
bind index <Right> next-new-then-unread
bind pager <Left> previous-new-then-unread
bind index <Left> previous-new-then-unread
bind pager \CE recall-message
bind index \CE recall-message

# Mailboxes.
mailboxes `mailboxes`

# Headers.
my_hdr X-PGP-Key: http://lass.lfod.us/will/pubkey.asc
ignore *
unignore from: date subject to cc reply-to:
unignore x-mailer user-agent
unignore x-spambayes X-PGP-Key
unignore X-Item-Link
unhdr_order *
hdr_order From Date: From: To: Cc: Subject: X-mailer:

# Lists.
subscribe madlug@madisonlinux\.org
subscribe (ports|misc|tech|www)@openbsd.org
subscribe techpartners@[a-zA-Z0-9\.]*wisc.edu
subscribe hn-cms-[[:graph:]]+@cern.ch
subscribe it-staff@physics.wisc.edu
subscribe osg-hadoop@OPENSCIENCEGRID.ORG

send-hook '~t .' "source ~/.mutt/default"

send-hook '~t \(jacobsonlaura.*@gmail\.com\|ljacobson@(biochem\.wisc\.edu\|deltanoid\.com)\)' "source ~/.mutt/laura"

send-hook '~t post@posterous\.com' 'unset signature'
fcc-hook '~t post@posterous\.com' 'posterous'

send-hook '~t @kingstarusa\.com' "source ~/.mutt/hep"
send-hook '~t @trincotech\.com' "source ~/.mutt/hep"
send-hook '~t @dell\.com' "source ~/.mutt/hep"
send-hook '~t @us\.ibm\.com' "source ~/.mutt/hep"
send-hook '~t @sun\.com' "source ~/.mutt/hep"
send-hook '~t @laurustech\.com' "source ~/.mutt/hep"
send-hook '~t @opensciencegrid\.org' "source ~/.mutt/hep"
send-hook '~t @[[:graph:]]*\.?ibm\.com' "source ~/.mutt/hep"
send-hook "~t @[[:graph:]]*\.edu" "source ~/.mutt/hep"
send-hook '~t @[[:graph:]]*\.?fnal\.gov' "source ~/.mutt/hep"
send-hook '~t @[[:graph:]]*\.?cern\.ch' "source ~/.mutt/hep"
send-hook '~t @[[:graph:]]*\.?desy\.de' "source ~/.mutt/hep"


send-hook '~L .*@[[:graph:]]*bsd[[:graph:]]*'	"set signature='~/.signatures/list-bsd'"

send-hook '~t techpartners@[[:graph:]]*wisc.edu'	"my_hdr From: Will Maier <willmaier@ml1.net>"

send-hook '~t madlug@madisonlinux.org'	"set signature='~/.signatures/list-bsd'"

folder-hook . "unset strict_threads"
folder-hook . "set duplicate_threads"
folder-hook . "set narrow_tree"
folder-hook . "set sort=threads"
folder-hook . "set sort_re"
folder-hook . "set sig_dashes"
folder-hook . 'set record="^"'
folder-hook . 'set index_format="%4C %[%y.%m.%dT%H:%M] %-8.8u  %Z %s"'

folder-hook =family set strict_threads
folder-hook =family set hide_top_missing
folder-hook =family set hide_missing
folder-hook =family unset sig_dashes

folder-hook =news push "<limit>~N<enter>"
folder-hook =news set sort=date
folder-hook =twitter set sort=date

folder-hook =sent set sort=reverse-date

folder-hook =hep/req set sort=threads
folder-hook =hep/req unset strict_threads
folder-hook =hep/req unset sort_re
folder-hook =hep/req 'set index_format="%4C %[%y.%m.%dT%H:%M] %-15.15n  %Z %s"'
fcc-hook "~thelp@hep\.wisc\.edu" "sent"

folder-hook =osg/goc set sort_re=no
folder-hook =osg/goc set strict_threads=no

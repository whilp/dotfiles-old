# Other files.
source "~/.mutt/aliases"
source "~/.mutt/color"
source "~/.mutt/pgp"

# Settings.
set alias_file="~/.mutt/aliases"
set ascii_chars=yes
set beep_new=yes
set certificate_file=~/.mutt.certificates
set charset="//TRANSLIT"
set copy=yes
set delete=yes
set edit_headers=yes
set editor='vi "+/^$"'
set folder=~/.maildir
set forward_format="Fwd: %s"
set from="Will Maier <willmaier@ml1.net>"
set header_cache=~/.maildir/.cache
set implicit_autoview=yes
set include=yes
set index_format="%4C %[%d.%m.%y %H:%M] %-23.23F  %Z %s"
set ispell=
set mark_old=no
set mask='!^(\.[^.]|attic|.*log)'
set mbox_type=Maildir
set move=no
set pager_index_lines=10
set pager_stop=yes
set postpone=no
set postponed="+drafts"
set print_cmd="a2ps -r -q --columns=2 -j -C -2 -Email -o - | ssh wcmaier@login.hep.wisc.edu 'lpr -Plp3b'"
set print_split=yes
set quit=ask-no
set recall=no
set record="+sent"
set reverse_name=yes
set sig_dashes=yes
set signature='~/.signatures/default'
set sort=threads
set sort_aux=reverse-last-date
set spoolfile='/var/mail/will'
set ssl_starttls
set wait_key=no

alternates "(wcmaier@wisc\.edu|wcmaier@hep\.wisc\.edu|wcmaier@gmail\.com|willmaier@ml1\.net|wcmaier@openbsd.org)"

# Macros.
macro index S "|/usr/local/bin/sb_filter.py -s >/dev/null<enter><save-message>=attic/spam<enter><enter>" "Mark as spam"
macro pager S "|/usr/local/bin/sb_filter.py -s >/dev/null<enter><save-message>=attic/spam<enter><enter>" "Mark as spam"
macro index H "|/usr/local/bin/sb_filter.py -g | fdm -mqa stdin fetch<enter><delete-message>" "Mark as ham"
macro pager H "|/usr/local/bin/sb_filter.py -g | fdm -mqa stdin fetch<enter><delete-message>" "Mark as ham"
macro pager o "|~/bin/viewitem<enter>" "Open RATM item link in a browser"
macro index o "|~/bin/viewitem<enter>" "Open RATM item link in a browser"
macro index C "<change-folder>?" "open a different folder"
macro pager C "<change-folder>?" "open a different folder"
macro index <Backspace> "<reply>^UUW-HEP Help System <help@hep.wisc.edu><enter><enter>"
macro pager <esc>s "<enter-command>source ~/.muttrc<enter>" "Reload configuration"
macro index <esc>s "<enter-command>source ~/.muttrc<enter>" "Reload configuration"

# Bindings.
bind index '.' buffy-list
bind generic 'G' noop
bind generic '\CG' noop
bind generic 'x' noop
bind index 'x' noop
bind pager 'x' noop
bind generic zg first-entry
bind generic zz current-middle
bind generic zG last-entry
bind index \CU previous-page
bind pager \CU previous-page
bind generic \CU previous-page
bind index \CF next-page
bind pager \CF next-page
bind pager j next-line
bind pager k previous-line
bind pager J next-undeleted
bind pager K previous-undeleted

# Mailboxes.
mailboxes !
mailboxes `\
    find ~/.maildir -type d -path '*cur' | \
    sed -e '/\/attic\//d; s/^.*\.maildir\///; s/\/cur$//' | \
    xargs -I% echo -n ' =%'`

# Headers.
my_hdr X-PGP-Key: http://lass.lfod.us/will/pubkey.asc
ignore *
unignore from: date subject to cc reply-to:
unignore x-mailer user-agent
unignore x-spambayes X-PGP-Key
unhdr_order *
hdr_order From Date: From: To: Cc: Subject: X-mailer:

# Lists.
subscribe madlug@madisonlinux\.org
subscribe (ports|misc|tech|www)@openbsd.org
subscribe techpartners@[a-zA-Z0-9\.]*wisc.edu
subscribe hn-cms-[[:graph:]]+@cern.ch
subscribe it-staff@physics.wisc.edu
subscribe osg-hadoop@OPENSCIENCEGRID.ORG

send-hook '~t .' "source ~/.mutt/default"

send-hook '~t \(jacobsonlaura.*@gmail\.com\|ljacobson@(biochem\.wisc\.edu\|deltanoid\.com)\)' "source ~/.mutt/laura"

send-hook '~t @kingstarusa\.com' "source ~/.mutt/hep"
send-hook '~t @ntsca\.com' "source ~/.mutt/hep"
send-hook '~t @sun\.com' "source ~/.mutt/hep"
send-hook '~t @laurustech\.com' "source ~/.mutt/hep"
send-hook '~t @opensciencegrid\.org' "source ~/.mutt/hep"
send-hook '~t @[[:graph:]]*\.?ibm\.com' "source ~/.mutt/hep"
send-hook "~t @[[:graph:]]*\.edu" "source ~/.mutt/hep"
send-hook '~t @[[:graph:]]*\.?fnal\.gov' "source ~/.mutt/hep"
send-hook '~t @[[:graph:]]*\.?cern\.ch' "source ~/.mutt/hep"
send-hook '~t @[[:graph:]]*\.?desy\.de' "source ~/.mutt/hep"


send-hook '~L .*@[[:graph:]]*bsd[[:graph:]]*'	"set signature='~/.signatures/list-bsd'"

send-hook '~t techpartners@[[:graph:]]*wisc.edu'	"my_hdr From: Will Maier <willmaier@ml1.net>"

send-hook '~t madlug@madisonlinux.org'	"set signature='~/.signatures/list-bsd'"

folder-hook . "unset strict_threads"
folder-hook . "set duplicate_threads"
folder-hook . "set narrow_tree"
folder-hook . "set sort=threads"
folder-hook . "set sort_re"
folder-hook . "set sig_dashes"
folder-hook . 'set record="^"'

folder-hook =family set strict_threads
folder-hook =family set hide_top_missing
folder-hook =family set hide_missing
folder-hook =family unset sig_dashes

folder-hook =news push "<limit>~N<enter>"
folder-hook =news set sort=date
folder-hook =twitter set sort=date

folder-hook =sent set sort=reverse-date

folder-hook =hep/req set sort=threads
folder-hook =hep/req unset strict_threads
folder-hook =hep/req unset sort_re
fcc-hook "~thelp@hep\.wisc\.edu" "sent"


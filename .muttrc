# Other files.
source "~/.mutt/aliases"
source "~/.mutt/color"
source "~/.mutt/smime"
source "~/.mutt/pgp"
source "~/.mutt/default"

set crypt_autosign = no
set crypt_replyencrypt = no
set crypt_replysign = no
set crypt_replysignencrypted = no
set smime_sign_as = "33e3e0cc.0"
set smime_timeout = "28800"

# Settings.
set alias_file="~/.mutt/aliases"
set ascii_chars=yes
set beep_new=yes
set certificate_file=~/.mutt.certificates
set copy=yes
set delete=yes
set duplicate_threads
set edit_headers=yes
set editor='vim "+/^$"'
set folder=~/.maildir
set forward_format="Fwd: %s"
set from="Will Maier <willmaier@ml1.net>"
set header_cache=~/.maildir/.cache
set help=no
set include=yes
set index_format="%4C %[%y-%m-%dT%H:%M] %M%Z %s %*    %L"
set ispell="aspell -e -c"
set mail_check=5
set maildir_header_cache_verify=no
set mark_old=no
set markers=no
set mask='!^(\.[^.]|attic|.*log)'
set mbox_type=Maildir
set move=no
set narrow_tree
set pager_format="%[%Y-%m-%dT%H:%M%z] %f %> %e,%E %C,%m %P "
set pager_stop=yes
set postpone=no
set postponed="+drafts"
set print_cmd="a2ps -r -q --columns=2 -j -C -2 -Email -o - | ssh wcmaier@luma.hep.wisc.edu 'lpr -Plp3b'"
set print_split=yes
set quit=ask-no
set realname="Will Maier"
set recall=no
set record="^"
set resolve=no
set reverse_name=yes
set sig_dashes
set sig_dashes=yes
set signature='~/.signatures/default'
set smart_wrap=yes
set sort=threads
set sort_aux=last-date
set sort_re
set spoolfile='~/.maildir'
set ssl_starttls
set status_format="%> %n,%m %P"
set time_inc=500
set timeout=60
set use_from=yes
set wait_key=no

auto_view text/html
auto_view */x-diff */x-patch */x-shellscript
auto_view */x-gunzip */x-tar-gz
auto_view application/msword

alternates -group hep "(William.Maier|wcmaier)@cern\.ch"
alternates -group hep "wcmaier@(fnal.gov|hep.wisc.edu|wisc.edu)"
alternates "wcmaier@gmail.com"
alternates "wcmaier@openbsd.org"
alternative_order text/plain

# Macros.
# Function list: http://www.mutt.org/doc/manual/manual-6.html#functions
macro index,pager <esc>h "<enter-command>source ~/.mutt/hep<enter>" "HEP SMTP configuration"
macro index,pager <esc>d "<enter-command>source ~/.mutt/default<enter>" "HEP SMTP configuration"
macro index,pager <esc>g "<enter-command>source ~/.mutt/gmail<enter>" "GMail SMTP configuration"
macro index,pager <esc>f "|fdm -a stdin fetch<enter>" "Refilter"

macro index,pager S "|spambayes -s >/dev/null<enter>" "Mark as spam"
macro index,pager H "|spambayes -g" "Mark as ham"
macro index,pager C "<change-folder>?" "open a different folder"
macro index,pager <esc>s "<enter-command>source ~/.muttrc<enter>" "Reload configuration"
macro index,pager d "<delete-message><toggle-new><next-new>"
macro index,pager = "<delete-pattern>~=<enter>"
macro index,pager w "<read-thread><next-new>"

macro index . "l~(~N)<enter><search>~N<enter>"
macro pager . "<exit>l~(~N)<enter><search>~N<enter>"
macro index ,h "l~(~N(%Chep|%Ccms|%Cosg))<enter>"
macro pager ,h "<exit>l~(~N(%Chep|%Ccms|%Cosg))<enter>"
macro index ,u "l~(~N(~yurgent))<enter>"
macro pager ,u "<exit>l~(~N(~yurgent))<enter>"
macro index ,p "l~(~N(~p))<enter>"
macro pager ,p "<exit>l~(~N(~p))<enter>"
macro index ,d "l~(~d<2d)<enter>"
macro pager ,d "<exit>l~(~d<2d)<enter>"
macro index ,f "l~(~F)<enter>"
macro pager ,f "<exit>l~(~F)<enter>"

macro index,pager m "<enter-command>source ~/.mutt/default<enter><mail>"
macro index,pager \'m "<enter-command>source ~/.mutt/hep<enter><mail>"
macro index,pager r "<enter-command>source ~/.mutt/default<enter><reply>"
macro index,pager \'r "<enter-command>source ~/.mutt/hep<enter><reply>"
macro index,pager L "<enter-command>source ~/.mutt/default<enter><list-reply>"
macro index,pager \'L "<enter-command>source ~/.mutt/hep<enter><list-reply>"
macro index,pager g "<enter-command>source ~/.mutt/default<enter><group-reply>"
macro index,pager \'g "<enter-command>source ~/.mutt/hep<enter><group-reply>"
macro index,pager f "<enter-command>source ~/.mutt/default<enter><forward-message>"
macro index,pager \'f "<enter-command>source ~/.mutt/hep<enter><forward-message>"

# Bindings.
bind generic,pager \CU previous-page
bind generic,pager \CF next-page
bind generic,pager j next-line
bind generic,pager k previous-line
bind index,pager J next-undeleted
bind index,pager K previous-undeleted
bind index x collapse-thread
bind index X collapse-all
bind index,generic N search-opposite
bind index,generic ? search-reverse
bind index \CN toggle-new
bind index,pager \CE recall-message

# Mailboxes.
mailboxes ~/.maildir

# Headers.
ignore *
unignore from date subject to cc reply-to message-id
unignore x-label x-mailer user-agent
unhdr_order *
hdr_order date from to cc subject message-id x-mailer user-agent

# Lists.
subscribe -group bsd (source|ports|hackers|ports|misc|tech|www|bugs)@(cvs.)?openbsd.org
subscribe -group cms cms-[[:graph:]]+@fnal.gov
subscribe -group cms hn-cms-[[:graph:]]+@cern.ch
subscribe -group hep "root@[[:graph:]]*hep.wisc.edu"
subscribe -group hep (afs-folks|cmsops|help)@hep.wisc.edu
subscribe -group hep (it-staff|physics-all)@physics.wisc.edu
subscribe -group osg osg-[[:graph:]]+@OPENSCIENCEGRID.ORG
subscribe -group osg osg-[[:graph:]]+@fnal.gov
subscribe .*@googlegroups.com
subscribe bugtraq@securityfocus.com
subscribe cdh-[[:graph:]]+@cloudera.org
subscribe hdfs-[[:graph:]]+@hadoop.apache.org
subscribe madlug@madisonlinux\.org
subscribe mercurial(-devel)?@selenic.com
subscribe project-indico-[[:graph:]]+@cern.ch
subscribe techpartners@[a-zA-Z0-9\.]*wisc.edu
subscribe ipython-[[:graph:]]+@scipy.org

source "~/.mutt/smtp"
folder-hook . "exec collapse-all"
fcc-hook . "~/.maildir"

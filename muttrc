# Will's muttrc / started 2005.03.06
## Based on:
## Phillip Hollenback's muttrc @ macdevcenter, for use with FastMail

## MAILDIR SETTINGS ##
set mbox_type=Maildir
set folder=~/Maildir
set copy=yes
set record="+Sent"
set postponed="+Drafts"

#set mask="!^\.[^.]"
#mailboxes `\
#files=~/Maildir/*; \
#for file in $files; do \
#    box=$(basename "$file"); \
#    if [ ! "$box" = '.' -a \
#	! "$box" = '..' -a \
#	! "$box" = '.customflags' -a \
#	! "$box" = '.subscriptions' -a \
#	! "$box" = 'drop.log' ]; then \
#	echo -n "\"=$box\" "; \
#    fi; \
#done`
#	! "$box" = 'Hack' -a \
#	! "$box" = 'Personal' -a \
#	! "$box" = 'Work' -a \

mailboxes ! `\
    find ~/Maildir -type d | \
    egrep -v 'cur$|tmp$|new$|Maildir$|Hack$|Work$|Personal$' | \
    sed 's/.*\/Maildir\///' | \
    xargs -I % echo -n ' =%'`

#mailboxes =Inbox \
#	    /var/mail/will \
#	    =Hack/Debian-security \
#	    =Hack/Madlug \
#	    =Hack/Screen-users \
#	    =Hack/Securityfocus \
#	    =Hack/Techpartners \
#	    =Hack/Vim \
#	    =Misc \
#	    =Personal/Details \
#	    =Personal/Family \
#	    =Personal/Friend \
#	    =Personal/Legal \
#	    =Personal/Misc \
#	    =Personal/School \
#	    =Sent \
#	    =Work/CAE \
#	    =Work/Centprop \
#	    =Work/Misc \

set alias_file="~/.muttalias"
#bind index 'G' imap-fetch-mail
#bind index '<Esc><Tab>' previous-new-then-unread
#bind index '<Tab>' next-new-then-unread
bind index '.' buffy-list
bind generic 'G' noop

macro index G "<shell-escape>~/bin/getmail<enter>" "Getmail"
macro pager G "<shell-escape>~/bin/getmail<enter>" "Getmail"
macro index S "<enter-command>source ~/.muttrc<enter>" "Reload configuration"
macro pager S "<enter-command>source ~/.muttrc<enter>" "Reload configuration"
macro index C "<change-folder>?<toggle-mailboxes>" "open a different folder"
macro pager C "<change-folder>?<toggle-mailboxes>" "open a different folder"

## SMTP SETTINGS ##
set sendmail="/usr/local/bin/nbsmtp -D"			# use ESMTP for egress mail

## PAGER SETTINGS ##
set implicit_autoview
set pager_stop				# don't jump to next message at end
set sort=threads
set sort_aux=reverse-date
#set sort=reverse-date-sent
source "~/.muttcolor"			# get color info
source "~/.muttalias"
set quit=yes
set move=no
set editor=vim

## COMPOSITION SETTINGS ##
set forward_format="Fwd: %s"		# traditional fwd: subj.
set postpone=no
set use_from=yes
set from="Will Maier <willmaier@ml1.net>"


## INDEX SETTINGS ##
set arrow_cursor			# don't hilite the whole line
set beep
set beep_new
set wrap_search
set index_format="%4C %Z %-20[%d.%m.%y at %H:%M] %-22.22F %s"


## EDIT SETTINGS ##
set abort_unmodified=yes		# don't send if message unmodified
set include=yes

## HEADER SETTINGS ##
ignore *				# default: ignore
unignore from: date subject to cc reply-to:
unignore x-mailer: user-agent
set signature='~/.signature'
set sig_dashes

#folder-hook * push 'T~=\n;d\n'
#folder-hook =Lists push 'T~R\ ~r\ >1m\n\;s=Lists.ARK\n'
#folder-hook =techpartners push 'T~R\ ~r\ >1m\n\;d\n'

send-hook '~t jacobsonlaura.*@gmail.com' 'set signature='~/.signature-laura'
send-hook '~t jacobsonlaura.*@gmail.com' 'unset sig_dashes'

folder-hook =Personal/Family set strict_threads
folder-hook =Personal/Family set hide_top_missing
folder-hook =Personal/Family set hide_missing
folder-hook =Personal/Family unset sig_dashes
